local fundoconfigs = setupUI([[
UIButton
  id: fundoconfigs
  anchors.horizontalCenter: parent.horizontalCenter
  anchors.top: parent.top
  text:
  background-color: black
  size: 200 45
  margin-top: 40
  opacity: 0.60
  border: 2 black
]],g_ui.getRootWidget())

local panelName = "Combo"
local cloretoOpenCombo = setupUI([[
UIButton
  id: Combo
  anchors.horizontalCenter: parent.horizontalCenter
  anchors.top: parent.top
  image-source: /bot/Cloreto/imagens/espadas
  tooltip: Configure aqui seu combo.
  size: 30 30
  margin-top: 48
  margin-left: -70
  opacity: 0.90
  $hover:
    opacity: 0.55
]],g_ui.getRootWidget())

local cloretoCombo = setupUI([[
LocalWindow < MainWindow
  size: 300 330
  padding: 0
  image-source: 

BackgroundLB < Label
  background-color: #1C1C1C
  opacity: 0.65
  anchors.fill: parent

BlackBorder < Label
  anchors.fill: parent
  border: 2 black
  focusable: false
  phantom: true

WindowTitle < Label
  anchors.centerIn: parent
  font: sans-bold-16px
  text: C O M B O    M A N A G E R
  color: #EEAEEE
  opacity: 0.75
  text-auto-resize: true
  margin-bottom: 145

LocalWindow
  BackgroundLB
  BlackBorder
  WindowTitle

  Label
    anchors.left: parent.left
    anchors.right: parent.horizontalCenter
    anchors.top: parent.top
    text-align: center
    text: 
    font: verdana-11px-rounded
    color: pink

  Label
    anchors.left: parent.horizontalCenter
    anchors.right: parent.right
    anchors.top: parent.top
    text-align: center
    text:
    font: verdana-11px-rounded
    color: pink

  ScrollablePanel
    id: content
    anchors.top: prev.top
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: separator.top
    vertical-scrollbar: contentScroll
    margin-bottom: 10

    Panel
      id: left
      anchors.top: parent.top
      anchors.left: parent.left
      anchors.right: parent.horizontalCenter
      margin-top: 40
      margin-left: 50
      margin-right: -100
      layout:
        type: verticalBox
        fit-children: true
    focusable: false

    Panel
      id: right
      anchors.top: parent.top
      anchors.left: parent.horizontalCenter
      anchors.right: parent.right
      margin-top: 40
      margin-left: 5
      margin-right: 5
      layout:
        type: verticalBox
        fit-children: true
      focusable: false

  HorizontalSeparator
    id: separator
    image-source: /imagens/botxd2
    height: 16
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: closeButton.top
    margin-bottom: 8
    
  UIButton
    id: closeButton
    image-source: /bot/Cloreto/imagens/fechar
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    size: 30 25
    margin-top: 13
    margin-right: 10
    margin-bottom: 10
    opacity: 1.00
    $hover:
      opacity: 0.55

]], g_ui.getRootWidget())
cloretoCombo:setId(PanelName)
cloretoCombo:hide();

if not storage[panelName] then
  storage[panelName] = {
}
end

local settings = storage[panelName]

cloretoOpenCombo.onClick = function(widget)
  if not cloretoCombo:isVisible() then
    cloretoCombo:show();
    cloretoCombo:raise();
    cloretoCombo:focus();
  else
    cloretoCombo:hide();
  end
end

cloretoCombo.closeButton.onClick = function(widget)
  cloretoCombo:hide();
    reload()
end

local leftPanel = cloretoCombo.content.left

LABEL = UI.Label("Jutsu 1, Coldoown:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.jutsu1 or "jutsu1, cooldown", function(widget, text)   
  storage.jutsu1 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Jutsu 2, Coldoown:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.jutsu2 or "jutsu2, cooldown", function(widget, text)   
  storage.jutsu2 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Jutsu 3, Coldoown:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.jutsu3 or "jutsu3, cooldown", function(widget, text)   
  storage.jutsu3 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Jutsu 4, Coldoown:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.jutsu4 or "jutsu4, cooldown", function(widget, text)   
  storage.jutsu4 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Jutsu 5, Coldoown:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.jutsu5 or "jutsu5, cooldown", function(widget, text)   
  storage.jutsu5 = text
end,leftPanel)

local jutsu1 = storage.jutsu1:split(',');
local jutsu2 = storage.jutsu2:split(',');
local jutsu3 = storage.jutsu3:split(',');
local jutsu4 = storage.jutsu4:split(',');
local jutsu5 = storage.jutsu5:split(',');

macro(1, function()
  if not storage.comboCombo then return end
  if g_game.isAttacking() then
    if not jutsu1slow or jutsu1slow <= os.time() and storage.jutsu1 ~= "" then
      say(jutsu1[1])
    end
    if not jutsu2slow or jutsu2slow <= os.time() and storage.jutsu2 ~= "" then
      say(jutsu2[1])
    end
    if not jutsu3slow or jutsu3slow <= os.time() and storage.jutsu3 ~= "" then
      say(jutsu3[1])
    end
    if not jutsu4slow or jutsu4slow <= os.time() and storage.jutsu4 ~= "" then
      say(jutsu4[1])
    end
    if not jutsu5slow or jutsu5slow <= os.time() and storage.jutsu5 ~= "" then
      say(jutsu5[1])
    end
  end
end)

os = os or modules.os;
local playerName = player:getName()


onTalk(function(name, level, mode, text, channelId, pos)
  text = text:lower();
  if name == player:getName() then
  local jutsu1 = storage.jutsu1:split(',');
  local jutsu2 = storage.jutsu2:split(',');
  local jutsu3 = storage.jutsu3:split(',');
  local jutsu4 = storage.jutsu4:split(',');
  local jutsu5 = storage.jutsu5:split(',');
    if text == jutsu1[1] then
      jutsu1slow = os.time() + jutsu1[2]
    end
    if text == jutsu2[1] then
      jutsu2slow = os.time() + jutsu2[2]
    end
    if text == jutsu3[1] then
      jutsu3slow = os.time() + jutsu3[2]
    end
    if text == jutsu4[1] then
      jutsu4slow = os.time() + jutsu4[2]
    end
    if text == jutsu5[1] then
      jutsu5slow = os.time() + jutsu5[2]
    end
  end
end)
-----------------------------------------------------

local panelName = "Buffs"
local cloretoOpenBuffs = setupUI([[
UIButton
  id: Buffs
  anchors.horizontalCenter: parent.horizontalCenter
  anchors.top: parent.top
  image-source: /bot/Cloreto/imagens/BUFF
  tooltip: Configure aqui seu Buffs.
  size: 35 35
  margin-top: 45
  margin-left: 0
  opacity: 0.90
  $hover:
    opacity: 0.55
]],g_ui.getRootWidget())

local cloretoBuffs = setupUI([[
LocalWindow < MainWindow
  size: 300 250
  padding: 0
  image-source: 

BackgroundLB < Label
  background-color: #1C1C1C
  opacity: 0.65
  anchors.fill: parent

BlackBorder < Label
  anchors.fill: parent
  border: 2 black
  focusable: false
  phantom: true

WindowTitle < Label
  anchors.centerIn: parent
  font: sans-bold-16px
  text: B U F F S    M A N A G E R
  color: #EEAEEE
  opacity: 0.75
  text-auto-resize: true
  margin-bottom: 100

LocalWindow
  BackgroundLB
  BlackBorder
  WindowTitle

  Label
    anchors.left: parent.left
    anchors.right: parent.horizontalCenter
    anchors.top: parent.top
    text-align: center
    text: 
    font: verdana-11px-rounded
    color: pink

  Label
    anchors.left: parent.horizontalCenter
    anchors.right: parent.right
    anchors.top: parent.top
    text-align: center
    text:
    font: verdana-11px-rounded
    color: pink

  ScrollablePanel
    id: content
    anchors.top: prev.top
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: separator.top
    vertical-scrollbar: contentScroll
    margin-bottom: 10

    Panel
      id: left
      anchors.top: parent.top
      anchors.left: parent.left
      anchors.right: parent.horizontalCenter
      margin-top: 50
      margin-left: 50
      margin-right: -100
      layout:
        type: verticalBox
        fit-children: true
    focusable: false

    Panel
      id: right
      anchors.top: parent.top
      anchors.left: parent.horizontalCenter
      anchors.right: parent.right
      margin-top: 40
      margin-left: 5
      margin-right: 5
      layout:
        type: verticalBox
        fit-children: true
      focusable: false

  HorizontalSeparator
    id: separator
    image-source: /imagens/botxd2
    height: 16
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: closeButton.top
    margin-bottom: 8
    
  UIButton
    id: closeButton
    image-source: /bot/Cloreto/imagens/fechar
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    size: 30 25
    margin-top: 13
    margin-right: 10
    margin-bottom: 10
    opacity: 1.00
    $hover:
      opacity: 0.55

]], g_ui.getRootWidget())
cloretoBuffs:setId(PanelName)
cloretoBuffs:hide();

if not storage[panelName] then
  storage[panelName] = {
}
end

local settings = storage[panelName]

cloretoOpenBuffs.onClick = function(widget)
  if not cloretoBuffs:isVisible() then
    cloretoBuffs:show();
    cloretoBuffs:raise();
    cloretoBuffs:focus();
  else
    cloretoBuffs:hide();
  end
end

cloretoBuffs.closeButton.onClick = function(widget)
  cloretoBuffs:hide();
    reload()
end

local leftPanel = cloretoBuffs.content.left

LABEL = UI.Label("Insira o Buff 1:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.buff1 or "", function(widget, text)   
  storage.buff1 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Insira o Buff 2:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.buff2 or "", function(widget, text)   
  storage.buff2 = text
end,leftPanel)

UI.Separator(leftPanel)

LABEL = UI.Label("Insira o Buff 3:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.buff3 or "", function(widget, text)   
  storage.buff3 = text
end,leftPanel)


macro(5000, function()
  if not storage.comboBuff then return end
  say(storage.buff1)
  delay(1000)
  say(storage.buff2)
  delay(1000)
  say(storage.buff3)
end)
---------------------------------------

local panelName = "Setup"
local cloretoOpenSetup = setupUI([[
UIButton
  id: Setup
  anchors.horizontalCenter: parent.horizontalCenter
  anchors.top: parent.top
  image-source: /bot/Cloreto/imagens/Engrenagem
  tooltip: Configure aqui os botões de atalho.
  size: 35 35
  margin-top: 46
  margin-left: 70
  opacity: 0.90
  $hover:
    opacity: 0.55
]],g_ui.getRootWidget())

local cloretoSetup = setupUI([[
LocalWindow < MainWindow
  size: 300 200
  padding: 0
  image-source: 

BackgroundLB < Label
  background-color: #1C1C1C
  opacity: 0.65
  anchors.fill: parent

BlackBorder < Label
  anchors.fill: parent
  border: 2 black
  focusable: false
  phantom: true

WindowTitle < Label
  anchors.centerIn: parent
  font: sans-bold-16px
  text: C O N F I G U R A T I O N S
  color: #EEAEEE
  opacity: 0.75
  text-auto-resize: true
  margin-bottom: 80

LocalWindow
  BackgroundLB
  BlackBorder
  WindowTitle

  Label
    anchors.left: parent.left
    anchors.right: parent.horizontalCenter
    anchors.top: parent.top
    text-align: center
    text: 
    font: verdana-11px-rounded
    color: pink

  Label
    anchors.left: parent.horizontalCenter
    anchors.right: parent.right
    anchors.top: parent.top
    text-align: center
    text:
    font: verdana-11px-rounded
    color: pink

  ScrollablePanel
    id: content
    anchors.top: prev.top
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: separator.top
    vertical-scrollbar: contentScroll
    margin-bottom: 10

    Panel
      id: left
      anchors.top: parent.top
      anchors.left: parent.left
      anchors.right: parent.horizontalCenter
      margin-top: 50
      margin-left: 5
      margin-right: 5
      layout:
        type: verticalBox
        fit-children: true
    focusable: false

    Panel
      id: right
      anchors.top: parent.top
      anchors.left: parent.horizontalCenter
      anchors.right: parent.right
      margin-top: 50
      margin-left: 5
      margin-right: 5
      layout:
        type: verticalBox
        fit-children: true
      focusable: false

  HorizontalSeparator
    id: separator
    image-source: /imagens/botxd2
    height: 16
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: closeButton.top
    margin-bottom: 8
    
  UIButton
    id: closeButton
    image-source: /bot/Cloreto/imagens/fechar
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    size: 30 25
    margin-top: 13
    margin-right: 10
    margin-bottom: 10
    opacity: 1.00
    $hover:
      opacity: 0.55

]], g_ui.getRootWidget())
cloretoSetup:setId(PanelName)
cloretoSetup:hide();

if not storage[panelName] then
  storage[panelName] = {
}
end

local settings = storage[panelName]

cloretoOpenSetup.onClick = function(widget)
  if not cloretoSetup:isVisible() then
    cloretoSetup:show();
    cloretoSetup:raise();
    cloretoSetup:focus();
  else
    cloretoSetup:hide();
  end
end

cloretoSetup.closeButton.onClick = function(widget)
    cloretoSetup:hide();
    reload()
end

local rightPanel = cloretoSetup.content.right
local leftPanel = cloretoSetup.content.left

LABEL = UI.Label("Atalho Auto Escadas:", rightPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.escadaid or "Space", function(widget, text)   
  storage.escadaid = text
end,rightPanel)

UI.Separator(rightPanel)

LABEL = UI.Label("Jumps MANUAL:", rightPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.keysJump or "KeyUP, KeyDown", function(widget, text)   
  storage.keysJump = text
end, rightPanel)

macro(1, function()
  local keysJump = storage.keysJump:split(',');
  if modules.corelib.g_keyboard.isKeyPressed(keysJump[1]) then
    say('jump up')
  end
  if modules.corelib.g_keyboard.isKeyPressed(keysJump[2]) then
    say('jump down')
  end
end)

LABEL = UI.Label("Atalho AutoJump:", leftPanel)
LABEL:setColor("orange")
LABEL:setFont("verdana-11px-rounded")

UI.TextEdit(storage.AutoJump or "F", function(widget, text)   
  storage.AutoJump = text
end, leftPanel)
